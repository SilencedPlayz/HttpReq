class HttpReq{constructor(u){this.url=u;this.onsuccess=!1;this.onerror=!1}OnSuccess(f){return this.onsuccess=f,this}OnFail(f){return this.onerror=f,this}async run(m="GET",h={},b=null){let o={method:m.toUpperCase(),headers:h};if("POST"===m.toUpperCase()&&null!==b)o.body="object"==typeof b?JSON.stringify(b):b,h["Content-Type"]||(h["Content-Type"]="application/json");try{const r=await fetch(this.url,o),c=r.headers.get("Content-type")||"",d=c.includes("application/json")?await r.json():await r.text();return this.onsuccess?this.onsuccess(d):console.log(d),d}catch(e){return this.onerror?this.onerror(e):console.log(e)}}}
